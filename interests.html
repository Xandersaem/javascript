<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Interests Page</title>
    <link rel="stylesheet" type="text/css" href="css/main.css" />
</head>

<body>
    <header>
        <div class="top">
            <a class="logo" href="index.html">CapellaVolunteers<span class="dotcom">.org</span></a>
        </div>
        <nav>
            <ul class="topnav">
                <li><a href="index.html">Home</a>
                </li>
                <li><a href="invitation.html">Invitation</a>
                </li>
                <li><a href="gallery.html">Gallery</a>
                </li>
                <li><a href="registration.html" class="active">Registration</a>
                </li>
            </ul>

        </nav>
    </header>
	
	<p>A few more questions...
	
    <section id="pageForm">
        <form method="#" action="confirm.html" onsubmit="return validateThis()">
			
			<!-- Form fields from registration.html -->
            <input type="hidden" name="userName" value="" />
            <input type="hidden" name="password" value="" />
            <input type="hidden" name="passwordVerify" value="" />
            <input type="hidden" name="firstName" value="" />
            <input type="hidden" name="lastName" value="" />
            <input type="hidden" name="email" value="" />
            <input type="hidden" name="phoneNumber" value="" />
			
			<p>What are you most interested in volunteering for?<br>
			<input type="checkbox" class="interests" id="interest1" name="interest1" value="Cooking">
			<label for="interest1"> I like to cook! </label><br>
			
			<input type="checkbox" class="interests" id="interest2" name="interest2" value="Recycling">
			<label for="interest2"> Recycling is my calling! </label><br>
			
			<input type="checkbox" class="interests" id="interest3" name="interest3" value="Animals">
			<label for="interest3"> Animals are my best buds! </label><br>
			<a id="cError" />
			<br>
			
			<p>
			<label for="signUpNewsletter">Sign up for newsletter:</label>
			<input type="radio"  name="signUpNewsletter" value="Yes"> Yes 
			<input type="radio"  name="signUpNewsletter" value="No"> No
			<br>
			<a id="rError" /> 
			<br>
			
			<p>
			<p>Any comments for us?<br>
			<textarea rows="3" cols="40" id ="comment" name="comment" form="pageForm">
			Enter text here...</textarea><br><br>
			
			<label for="referSource">Who referred you to us?</label>
			<input type="text" id="referSource" name="referSource"><br>
			
            <input type="submit" value="Register">
        </form>
    </section>

	<script>
		/* Function adapted from W3schools.com for cookie functionality */
		function setCookie(cname, cvalue, exdays) {
			var d = new Date();
			d.setTime(d.getTime() + (exdays*24*60*60*1000));
			var expires = "expires="+ d.toUTCString();
			document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
		}
		
		/* Function adapted from W3Schools.com for cookie functionality */
		function getCookie(cname) {
			var name = cname + "=";
			var decodedCookie = decodeURIComponent(document.cookie);
			var ca = decodedCookie.split(';');
			for(var i = 0; i <ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ') {
					c = c.substring(1);
				}
				if (c.indexOf(name) == 0) {
					return c.substring(name.length, c.length);
				}
			}
			return "";
		}
		
		function validateThis() {
		
			var outError = false;
			
			document.getElementById("cError").innerHTML = "";
			document.getElementById("rError").innerHTML = "";
			
			var check1 = document.getElementById("interest1").value;
			var check2 = document.getElementById("interest2").value;
			var check3 = document.getElementById("interest3").value;
			
			
			var newsletter = document.getElementsByName("signUpNewsletter");
			// get radio dial 
				
			for(i = 0; i < newsletter.length; i++) 
			{
				if(newsletter[i].checked){
					var nLetter = newsletter[i].value;
				}
			}
				// checks checked
			if ((nLetter != "Yes") && (nLetter != "No"))// error if no box is checked
			{
				document.getElementById("rError").innerHTML = 
				"Please select a box. Would you like our newsletter?";
				outError = true;
			}
			
			//Checks if the interests boxes are filled out
			var checkBoxes = document.getElementsByClassName('interests');
			var isChecked = false;
				
			for (var i = 0; i < checkBoxes.length; i++) {
				if (checkBoxes[i].checked) {
					isChecked = true;
				}
			}
			if (isChecked == false) {
				outError = true;
				document.getElementById("cError").innerHTML = 
				"Please select at least one checkbox!";
			}
			
			// Stop form submission if there's a problem
			if (outError == true) {
				return false;
			}
			else {
				if( checkBoxes[0].checked == true) {
					setCookie("interest1", check1, 365);
				}
				if( checkBoxes[1].checked == true) {
					setCookie("interest2", check2, 365);
				}
				if( checkBoxes[2].checked == true) {
					setCookie("interest3", check3, 365);
				}
				setCookie("newsletter", nLetter, 365);
				setCookie("comments", document.getElementById("comment").value, 365);
				setCookie("referredby", document.getElementById("referSource").value, 365);
				return false;
			}
			
			//Here in case all other returns are somehow missed
			return false;
		}
		
	</script>

    <footer>This events site is for IT-FP3215 tasks.
    </footer>
</body>

</html>
